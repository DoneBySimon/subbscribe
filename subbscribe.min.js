(function(a){a.fn.subbscribe=function(q){var f=this;var c=a.extend({list:"MailChimp",url:"",title:"Never miss a post!",text:"Get our latest posts and announcements in your inbox. You won't regret it!",name:"Subbscribe Plus",color:"#ee6262",thumbnail:"https://s3-ap-southeast-2.amazonaws.com/subbscribe/img/avatar.png",emailonly:false,send_to_signup:false,cm_mail_field:"",button:"Subscribe",thanks:"Thanks! Check your email for confirmation.",error:"Oops! Check your details and try again.",no_nonsense:false,footer:true},q);if(c.url==""){console.log("Subbscribe Error: You must provide a valid MailChimp form URL.");return}if(c.list==="CampaignMonitor"&&!c.cm_mail_field.length){console.log("You must provide the mail input name. Found in the form code from Campaign Monitor");return}var n="";var l="";var d="";if(c.list=="MailChimp"){n="NAME";l="EMAIL";_action=c.url.replace("/post?","/post-json?").concat("&c=?")}else{if(c.list=="CampaignMonitor"){n="cm-name";l=c.cm_mail_field;_action=c.url+"?callback=?"}else{console.log("Subbscribe Error: list value must be set to MailChimp or CampaignMonitor");return}}var m="";var o='<input type="email" name="'+l+'" id="subb-EMAIL" placeholder="Email Address" />';if(!c.emailonly){m=' <input type="text" name="'+n+'" id="subb-NAME" placeholder="Name" />'}var g='<div id="subbscribe" style="display: none"> <div class="subb-title">'+c.title+' <img class="close-x" src="https://s3-ap-southeast-2.amazonaws.com/subbscribe/img/close.svg" />  </div> <div class="subb-body"> ';if(!c.no_nonsense){g+='<div class="subb-hidden"><div class="subb-thumbnail"><img style="width: 40px; height: 40px;" src="'+c.thumbnail+'" /></div><div class="subb-hidden">  <div class="subb-site"> &nbsp;'+c.name+' </div><button class="subb-button show-form">Subscribe</button> </div></div>';g+='<div class="subb-form" style="display: none">'}else{g+='<div class="subb-form">'}g+="<p>"+c.text+'</p>  <form id="mc-embedded-subbscribe-form" method="post" action="'+c.url+'"><div class="subbscribe-alert subbscribe-error" style="display: none">'+c.error+"</div>";if(!c.send_to_signup){g+='<div class="subbscribe-alert subbscribe-success" style="display: none">'+c.thanks+"</div>"}g+='<div class="text-input"> '+m+' </div> <div class="text-input"> '+o+' </div><button class="subb-button submit-form" type="submit" style="width: 100%; margin-bottom: 10px;">'+c.button+"</button></form>";if(c.footer){g+='<div class="footer">Powered by <a href="http://www.subbscribe.com" target="_blank">Subbscribe.com</a></div>'}g+="</div> </div> </div>";if(k("subbscribe-hidden")!=1){this.append(g);setTimeout(function(){a("#subbscribe").css("display","block");a("#subbscribe").css("width",a(".subb-hidden").width()+100);a("#subbscribe").addClass("animated slideInRight")},c.delay*1000)}a("#subbscribe .subb-button").css("background-color",c.color);a("#subbscribe .close-x").click(function(){a("#subbscribe").toggleClass("slideInRight fadeOut");a("#subbscribe").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a("#subbscribe").remove();p("subbscribe-hidden",1,1)});c.onClose.call()});a("#subbscribe .show-form").click(function(){a("#subbscribe .subb-hidden").hide();a("#subbscribe .subb-form").show()});a("#mc-embedded-subbscribe-form").submit(function(r){r.preventDefault();if(e()){a("#subbscribe .subbscribe-error").slideUp();a("#subbscribe .submit-form").attr("disabled","disabled");if(c.send_to_signup){window.open("https:"+c.url+"&"+a(this).serialize());j()}else{a.ajax({url:_action,type:"post",data:a(this).serialize(),dataType:"json",contentType:"application/json; charset=utf-8",success:function(s){if(h(s)){console.log("Subbscribe Error: submission failed.")}else{j()}}})}}else{a("#subbscribe .subbscribe-error").slideDown()}});function j(){i();a(".subbscribe-success").slideDown();setTimeout(function(){a("#subbscribe").addClass("animated fadeOut")},2000);a("#subbscribe").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a("#subbscribe").remove();p("subbscribe-hidden",1,365);if(typeof c.onSubbscribe==="function"){c.onSubbscribe.call()}})}function h(r){console.log(r);if(c.list=="MailChimp"){if(r.result!="success"){return true}return false}else{if(c.list=="CampaignMonitor"){if(r.Status===400){return true}return false}}return true}function i(){a("#subbscribe input").each(function(){a(this).val("")})}function b(r){var s=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return s.test(r)}function e(){var t=true;var s=a("#subb-NAME");var r=a("#subb-EMAIL");if(!c.emailonly){if(s.val().length<2){t=false;s.addClass("error")}else{s.removeClass("error")}}if(!b(r.val())){t=false;r.addClass("error")}else{r.removeClass("error")}return t}function p(s,v,t){var u=new Date();u.setTime(u.getTime()+(t*24*60*60*1000));var r="expires="+u.toUTCString();document.cookie=s+"="+v+"; "+r+"; path=/"}function k(t){var s=t+"=";var r=document.cookie.split(";");for(var u=0;u<r.length;u++){var v=r[u];while(v.charAt(0)==" "){v=v.substring(1)}if(v.indexOf(s)==0){return v.substring(s.length,v.length)}}return""}}}(jQuery));